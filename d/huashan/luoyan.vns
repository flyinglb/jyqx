// Room: /d/huashan/luoyan.c

#include <room.h>
inherit ROOM;

void create()
{
        set("short", "ÂäÑã·å");
        set("long", @LONG
ÄÏ·åÓÖÃûÂäÑã·å£¬ÊÇ»ªÉ½×î¸ß·å.´«ËµÎå´úÊ±ºòµÄÒþÊ¿³ÂÞÒ¾ÍÒþ¾ÓÔÚÕâÀï¡£
ËÎÌ«×æÔø¾­ÏÂÚ¯Õ÷Ëû³öÉ½×÷¹Ù£¬Ëû±ãÔÚÕâÀïÐ´ÏÂÐ»Ú¯±íËµ:"Ò»Æ¬Ò°ÐÄ¶¼±»
°×ÔÆËø×¡£¬¾ÅÖØ³èÚ¯ÐÝ½Ìµ¤·ïÏÎÀ´"£¬±íÊ¾²»Ô¸³öÉ½×ö¹Ù¡£
LONG
        );
        set("exits", ([ /* sizeof() == 4 */
//         "southwsest" : __DIR__
        ]));
        set("no_clean_up", 0);
        set("outdoors", "huashan");
        setup();
}
void init(){
        object me;
        if( interactive( me = this_player()))
          remove_call_out("clone_check");
          call_out("clone_check", 2,me);

}
void clone_feng_qingyang(object me)
{
     object ob;

     if( environment(me) == this_object())
       if ( ((string)me->query("family/family_name")=="»ªÉ½ÅÉ") && 
          ((int)me->query("family/generation")==13) )
       {
         ob=new("/kungfu/class/huashan/feng-qingyang.c");
         ob->move(environment(me));
       }
}
void clone_check(object me)
{
        object *ob;
        int i,j;

        j=0;
        ob = all_inventory(environment(me));
   for(i=0; i<sizeof(ob); i++){
   if ( (!userp(ob[i]))
      && ((string)ob[i]->query("id")=="feng qingyang") )
      j=1;
   }
   if (j==0)
      call_out("clone_feng_qingyang",2,me);
}
